<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xlljoy.o2o.dao.ShopDao">
	<insert id="insertShop" useGeneratedKeys="true" keyColumn="id"
		keyProperty="id">
		INSERT INTO
		tb_shop(name, owner_id, zone_id, priority,
		shop_desc, advice, addr, phone, img, enable_status, create_time,
		update_time, shop_category_id)
		VALUES
		(#{name},#{owner.id},#{zone.zoneId},
		#{priority},#{shopDesc},#{advice},#{addr},#{phone},
		#{img},#{enableStatus},
		#{createTime},#{updateTime},#{shopCategory.id})
	</insert>
	<update id="updateShop" parameterType="com.xlljoy.o2o.entity.Shop">
		UPDATE
		tb_shop
		<set>
			<if test="name != null"> name = #{name},</if>
			<if test="shopDesc != null">shop_desc=#{shopDesc},</if>
			<if test="shopAddr != null">shop_addr=#{shopAddr},</if>
			<if test="phone != null">phone=#{phone},</if>
			<if test="shopImg != null">shop_img=#{shopImg},</if>
			<if test="priority != null">priority=#{priority},</if>
			<if test="lastEditTime != null">last_edit_time=#{lastEditTime},</if>
			<if test="enableStatus != null">enable_status=#{enableStatus},</if>
			<if test="advice != null">advice=#{advice},</if>
			<if test="area != null">area_id=#{area.areaId},</if>
			<if test="shopCategory != null">shop_category_id=#{shopCategory.shopCategoryId}</if>
		</set>
		
		where id == #{id}
	</update>
</mapper>